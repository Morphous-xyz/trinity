# Deleverage

## Usage

```js copy
import { Matrix } from '@morphous/trinity'

const data = await Matrix.deleverage(
  morphoMarketAddress,
  txDeadline,
  toWallet,
  paybackMarketAddress,
  withdrawMarketAddress,
  paybackToken,
  withdrawToken,
  userAddress,
  smartWalletAddress,
  paybackValue,
  withdrawValue,
  slippage,
  max
)
```

## Configuration

### morphoMarketAddress

`string` - The Morpho Proxy market address, either Morpho Compound or Morpho Aave v2. The corresponding address can be found in [Morpho's developer documentation](https://developers.morpho.xyz/interact-with-morpho/deployments).

### txDeadline

`number` - The period of time before the transaction is reverted (in seconds).

### toWallet

`boolean` - true if the funds should be transfered to the user's wallet, false if the funds should stay on the user's DSProxy.

### paybackMarketAddress

`string` - Compound or Aave v2 debt market address. It can be found in [Compound's documentation](https://docs.compound.finance/v2/#networks) or [Aave v2 documentation](https://docs.aave.com/developers/v/2.0/deployed-contracts/deployed-contracts).

### withdrawMarketAddress

`string` - Compound or Aave v2 collateral market address. It can be found in [Compound's documentation](https://docs.compound.finance/v2/#networks) or [Aave v2 documentation](https://docs.aave.com/developers/v/2.0/deployed-contracts/deployed-contracts).

### paybackToken

`Token` - Object with debt token data

```js
{
  address: string
  name: string
  symbol: string
  decimals: number
  extensions?: any
}
```

### withdrawToken

`Token` - Object with collateral token data

```js
{
  address: string
  name: string
  symbol: string
  decimals: number
  extensions?: any
}
```

### userAddress

`string` - User's wallet address.

### smartWalletAddress

`string` - User's DSProxy address.

### paybackValue

`BigNumber` - Value to payback.

### withdrawValue

`BigNumber` - Value to withdraw.

### slippage

`number` - min: 0, max: 10000. For example, 50 for 0.50% slippage.

### max

`boolean` - true if all the funds should be deleverage, false if not.